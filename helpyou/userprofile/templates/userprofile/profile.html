{% extends 'base.html' %}
{% load staticfiles %}
{% load mathfilters %}
{% load lookupfilter %}
{% block content %}
    {% include 'nav-bar.html' %}
    <div class="row extra-top-margin">
        <!-- Main Blog Content -->
        <div class="large-12 columns" role="content">
            <div class="large-3 columns">
                {% if profile %}
                    <img src="/avatars/{{ profile.picture }}"/>
                {% else %}
                    <img src="/avatars/{{ other_profile.picture }}"/>
                {% endif %}
            </div>
            <div class="large-6 columns">
                <article>
                    {% if profile %}
                        <h2>{{ user.first_name }} {{ user.last_name }}</h2>
                        {% if profile.connections %}
                            <h3>Number of Connections: {{ profile.connections|length }}0</h3>
                            {% else %}<h3>Number of Connections: 0</h3>{% endif %}
                        <button class="sub-button [radius small round]" onclick="window.location.href='{% url 'user:pricing' %}'">CURRENT PLAN: {% if profile.plan == 0 %}FREE{% elif profile.plan == 1 %}BUSINESS PLUS{% else %}EXECUTIVE{% endif %}</button>

                        <button class="sub-button [radius small round]">SETTINGS</button>
                    {% else %}
                        <h2>{{ other_profile.user.first_name }} {{ other_profile.user.last_name }}</h2>
                        {% if profile.connections %}
                            <h3>Number of Connections: {{ other_profile.connections|length }}0</h3>
                            {% else %}<h3>Number of Connections: 0</h3>{% endif %}
                    {% endif %}
                    {% if profile %}
                        <form method="POST" action="{% url 'user:index' %}">
                            {% csrf_token %}
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="email">Email<img src="{% static 'images/settingspng.png' %}"
                                                                 class="right"></label>
                                    <input id="email" name="email" value="{{ profile.user.email }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="company">Company</label>
                                    <input id="company" name="company" value="{{ profile.company }}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="interests">Interests</label>
                                    <input id="interests" name="interests" value="{{ profile.interests }}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="skills">Skills</label>
                                    <input id="skills" name="skills" value="{{ profile.skills }}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="city">City</label>
                                    <input id="city" name="city" value="{{ profile.city }}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="industry">Industry</label>
                                    <input id="industry" name="industry" value="{{ profile.industry }}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="education">Education</label>
                                    <input id="education" name="education" value="{{ profile.educations }}">
                                </div>
                            </div>
                            <div class="right">
                                <button type="submit" class="button-important extra-top-margin [radius tiny round]">
                                    UPDATE
                                </button>
                            </div>
                        </form>
                    {% else %}
                        <form method="POST" action="{% url 'user:index' %}">
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="company">Company</label>
                                    <input id="company" name="company" value="{{ profile.company }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="interests">Interests</label>
                                    <input id="interests" name="interests" value="{{ profile.interests }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="skills">Skills</label>
                                    <input id="skills" name="skills" value="{{ profile.skills }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="city">City</label>
                                    <input id="city" name="city" value="{{ profile.city }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="industry">Industry</label>
                                    <input id="industry" name="industry" value="{{ profile.industry }}" disabled>
                                </div>
                            </div>
                            <div class="row">
                                <div class="large-12 columns">
                                    <label for="education">Education</label>
                                    <input id="education" name="education" value="{{ profile.educations }}" disabled>
                                </div>
                            </div>
                        </form>
                    {% endif %}
                </article>
            </div>
            <div class="large-3 columns side-bar">
                {% if profile %}
                    <div class="side-panel">
                        <div class="bar-title">COMMISSION EARNED</div>
                        <div class="bar-content">$ {{ profile.commission_earned }}</div>
                    </div>
                    <div class="side-panel">
                        <div class="bar-title">LEADS GENERATED</div>
                        <div class="bar-content">{{ profile.leads_useful }}</div>
                    </div>
                {% else %}
                    <div class="side-panel">
                        <div class="bar-title">LEADS GENERATED</div>
                        <div class="bar-content">{{ other_profile.leads_useful }}</div>
                    </div>
                {% endif %}
            </div>
        </div>
        <!-- End Main Content -->
    </div>
    {% if profile %}
        <div id="collect-form" title="Collect Points" data-role="none"
             style="display: none; background: #eef2f7; padding: 10px">
            <h3>Collect Points</h3>

            <form data-role="none" action="{% url 'user:collect' %}" method="post">
                {% csrf_token %}
                <fieldset data-role="none">
                    <label for="amount" data-role="none">Amount: </label>
                    <input type="text" id="amount" name="amount" value="{{ profile.points_current }}">
                    <br><h5>Money To Be Received: $<span id="money_out">{{ profile.points_current }}</span></h5>
                    <label for="email" data-role="none" style="margin-top: 5px">PayPal Email: </label>
                    <input type="email" id="email" name="email">
                    <input type="submit" value="Collect" class="button" id="id_collect">
                </fieldset>
            </form>
        </div>
        <div id="avatar" title="Change Avatars" data-role="none"
             style="display: none; background: #eef2f7; padding: 10px">
            <form data-role="none" action="{% url 'user:change_pic' %}" method="post" enctype="multipart/form-data">
                <fieldset data-role="none">
                    {% csrf_token %}
                    <label>Choose a new avatar: </label>

                    <p>
                        <input id="id_image" type="file" class="" name="pic">
                    </p>
                    <input class="button" type="submit" value="Change Picture">
                </fieldset>
            </form>
        </div>
    {% endif %}
    <!-- End Row -->
{% endblock %}