{% extends 'base.html' %}
{% load staticfiles %}
{% load is_list %}
{% block content %}
    <div class="large-9 columns">
        <div class="row main-content-top">
            <div class="large-6 columns">
                <h2 class="top-title"><span class="title-icon"><i class="icon-reorder"></i></span>Other's Requests</h2>
            </div>
            <div class="large-6 columns">
                <ul class="breadcrumbs right">
                    <li><a href="/">Home</a></li>
                    <li class="current"><a href="#">All Requests</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <ul class="splitter portfolio-main filter">
                    <li class="segment-0 selected-1 active"><a class="all" href="#">Show All</a></li>
                    <li class="segment-6"><a class="free" href="#">Free</a></li>
                    <li class="segment-1"><a class="five" href="#">Less Than 5 Credits</a></li>
                    <li class="segment-2"><a class="ten" href="#">Less Than 10 Credits</a></li>
                    <li class="segment-3"><a class="more" href="#">More Than 10 Credits</a></li>
                </ul>
            </div>
        </div>
        <div class="row main-content">
            <div class="large-12 columns">
                <div class="row">
                    <div class="large-12 columns">
                        <h3>Requests</h3>

                        <div class="row">
                            <ul class="portfolio-content">
                                {% for request_someone in requests %}
                                    <li data-id="{{ forloop.counter }}"
                                        data-type="{% if request_someone.reward == 0 %}free{% elif  request_someone.reward <= 5 %}five{% elif request_someone.reward <= 10 %}ten{% else %}more{% endif %}">
                                        <div class="panel">
                                            {% if "bold" in features %}<strong>{% endif %}<a
                                                    {% if "larger_font" in features %}style="font-size: 15px" {% endif %}
                                                    href="{% url 'request:view_your_id' request_someone.id %}">{{ request_someone }}</a>
                                            {% if "bold" in features %}</strong>{% endif %}
                                            By: <strong>{% if not request_someone.anon %}<a
                                                href="{% url 'user:user' request_someone.user.id %}">
                                            {{ request_someone.user.username }}</a>{% else %}Anonymous{% endif %}
                                        </strong>
                                            with Max Reward
                                            <strong>${{ request_someone.reward }}</strong>
                                            {% if not request_someone.response_set.all|in_list_user:request.user %}
                                                <a class="button pull-right" style="margin-top: -6px"
                                                   href="{% url 'response:create' request_someone.id %}">Respond To</a>
                                            {% else %}
                                                <div class="color pull-right">
                                                    <strong>You have already responded!</strong></div>
                                            {% endif %}
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row -->
{% endblock %}
{% block additionalScripts %}
    <script type="text/javascript" src="{% static 'js/jquery.quicksand.js' %}"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            var $filterType = $('.portfolio-main li.active a').attr('class');
            var $holder = $('ul.portfolio-content');
            var $data = $holder.clone();
            jQuery('.portfolio-main li a').click(function (e) {

                $('.portfolio-main li').removeClass('active');
                var $filterType = $(this).attr('class');
                $(this).parent().addClass('active');

                if ($filterType == 'all') {
                    var $filteredData = $data.find('li');
                }
                else {
                    var $filteredData = $data.find('li[data-type=' + $filterType + ']');
                }
                $holder.quicksand($filteredData,
                        {duration: 0, easing: 'easeInOutQuad'},
                        function () {

                        }
                );
                return false;
            });
        });
    </script>
{% endblock %}
